from plyer import notification
import socket
import platform
import psutil

interfaces = psutil.net_if_addrs()
network_info = "\n".join([f"Interface: {iface}, Adresse IP: {addrs[0].address}" for iface, addrs in interfaces.items() if addrs and addrs[0].family == socket.AF_INET])

current_user = psutil.users()[0].name

os_name = platform.system()
os_version = platform.release()
os_architecture = platform.architecture()[0]

disk_info = psutil.disk_usage("/")

title = 'INFECTION'
message = f"You've just been infected by a malware\nIP Address: {ip_address}\nComputer Name: {computer_name}\n\n"
message += f"Network Info:\n{network_info}\n\n"
message += f"Current User: {current_user}\n"
message += f"Operating System: {os_name} {os_version} {os_architecture}\n"
message += f"Total Disk Space: {disk_info.total / (1024 ** 3):.2f} GB\n"
message += f"Used Disk Space: {disk_info.used / (1024 ** 3):.2f} GB"

notification.notify(title=title, message=message, timeout=15, toast=False)
